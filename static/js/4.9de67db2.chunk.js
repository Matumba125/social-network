(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[4],{2013:function(e,s,t){e.exports={chatWrapper:"Chat_chatWrapper__2X21x"}},2015:function(e,s,t){"use strict";t.r(s);var a=t(0),r=t(451),n=t.n(r),c=t(46),i=t(453),l=t.n(i),u=t(452),o=t.n(u),d=t(57),j=t(2017),g=t(19),b=t(183),f=t(3),O=function(){var e=Object(a.useState)(""),s=Object(c.a)(e,2),t=s[0],r=s[1],n=Object(g.c)((function(e){return e.chat.isReady})),i=Object(g.b)(),u=function(){t&&(i(Object(b.b)(t)),r(""))};return Object(f.jsxs)("div",{className:o.a.addMessage,children:[Object(f.jsx)(l.a,{className:o.a.messageInput,autoSize:{minRows:1},value:t,onChange:function(e){r(e.target.value)},onKeyPress:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),u())}}),Object(f.jsx)(d.a,{icon:Object(f.jsx)(j.a,{style:{color:"rgba(0, 0, 0, 0.85)"}}),type:"text",className:o.a.sendBtn,onClick:u,disabled:!n})]})},h=t(450),x=t.n(h),p=t(243),_=t(432),m=t(35),v=function(e){var s=e.last||e.unique?x.a.lastMessageWrapper:x.a.message,t=e.last||e.unique?x.a.lastMessage:x.a.messageContent;return Object(f.jsxs)("div",{className:s,children:[(e.last||e.unique)&&Object(f.jsxs)(m.c,{to:"/social-network/profile/"+e.userId,children:[Object(f.jsx)(p.a,{src:e.photo&&e.photo,icon:!e.photo&&Object(f.jsx)(_.a,{}),className:x.a.avatar,size:40}),Object(f.jsx)("div",{className:x.a.svgAppendix,children:Object(f.jsxs)("svg",{width:"9",height:"20",xmlns:"http://www.w3.org/2000/svg",children:[Object(f.jsx)("defs",{children:Object(f.jsxs)("filter",{x:"-50%",y:"-14.7%",width:"200%",height:"141.2%",filterUnits:"objectBoundingBox",id:"a",children:[Object(f.jsx)("feOffset",{dy:"1",in:"SourceAlpha",result:"shadowOffsetOuter1"}),Object(f.jsx)("feGaussianBlur",{stdDeviation:"1",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),Object(f.jsx)("feColorMatrix",{values:"0 0 0 0 0.0621962482 0 0 0 0 0.138574144 0 0 0 0 0.185037364 0 0 0 0.15 0",in:"shadowBlurOuter1"})]})}),Object(f.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(f.jsx)("path",{d:"M3 17h6V0c-.193 2.84-.876 5.767-2.05 8.782-.904 2.325-2.446 4.485-4.625 6.48A1 1 0 003 17z",fill:"rgb(24, 37, 51)",filter:"url(#a)"}),Object(f.jsx)("path",{d:"M3 17h6V0c-.193 2.84-.876 5.767-2.05 8.782-.904 2.325-2.446 4.485-4.625 6.48A1 1 0 003 17z",fill:"rgb(24, 37, 51)",className:"corner"})]})]})})]}),Object(f.jsxs)("div",{className:t,children:[(e.first||e.unique)&&Object(f.jsx)(m.c,{to:"/social-network/profile/"+e.userId,children:Object(f.jsx)("div",{className:x.a.name,children:e.userName})}),Object(f.jsx)("div",{className:x.a.text,children:e.message})]})]})},M=t(455),w=t.n(M),N=t(2016),I=t(456),B=t(27),y=function(e){var s=e.last||e.unique?x.a.userLastMessageWrapper:x.a.userMessage,t=e.last||e.unique?x.a.userLastMessage:x.a.userMessageContent;return Object(f.jsxs)("div",{className:s,children:[(e.last||e.unique)&&Object(f.jsx)("div",{className:x.a.userAppendix,children:Object(f.jsxs)("svg",{width:"9",height:"20",xmlns:"http://www.w3.org/2000/svg",children:[Object(f.jsx)("defs",{children:Object(f.jsxs)("filter",{x:"-50%",y:"-14.7%",width:"200%",height:"141.2%",filterUnits:"objectBoundingBox",id:"a",children:[Object(f.jsx)("feOffset",{dy:"1",in:"SourceAlpha",result:"shadowOffsetOuter1"}),Object(f.jsx)("feGaussianBlur",{stdDeviation:"1",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),Object(f.jsx)("feColorMatrix",{values:"0 0 0 0 0.0621962482 0 0 0 0 0.138574144 0 0 0 0 0.185037364 0 0 0 0.15 0",in:"shadowBlurOuter1"})]})}),Object(f.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(f.jsx)("path",{d:"M6 17H0V0c.193 2.84.876 5.767 2.05 8.782.904 2.325 2.446 4.485 4.625 6.48A1 1 0 016 17z",fill:"rgb(135,116,225)",filter:"url(#a)"}),Object(f.jsx)("path",{d:"M6 17H0V0c.193 2.84.876 5.767 2.05 8.782.904 2.325 2.446 4.485 4.625 6.48A1 1 0 016 17z",fill:"rgb(135,116,225)",className:"corner"})]})]})}),Object(f.jsx)("div",{className:t,children:Object(f.jsx)("div",{className:x.a.userText,children:e.message})})]})},A=function(){var e=Object(a.useState)([]),s=Object(c.a)(e,2),t=s[0],r=s[1],n=Object(g.c)((function(e){return e.chat.messages})),i=Object(g.c)(B.b),l=Object(a.useState)(!0),u=Object(c.a)(l,2),o=u[0],j=u[1],b=Object(a.useState)(-2),O=Object(c.a)(b,2),h=O[0],x=O[1],p=document.getElementById("data");Object(a.useEffect)((function(){var e=n.slice();if(n){for(var s=0;s<e.length;s++)e[s].userId===i&&(e[s].userMessage=!0);for(var t=0;t<e.length;t++){var a,c,l;if(e[t].userId===(null===(a=e[t+1])||void 0===a?void 0:a.userId)&&e[t].userId!==(null===(c=e[t-1])||void 0===c?void 0:c.userId)){e[t].first=!0,e[t].unique=!1;for(var u=t;e[u].userId===(null===(d=e[u+1])||void 0===d?void 0:d.userId)&&e[u+1].userId;){var d;u++}e[u-1].last=!1,e[u].last=!0,t=u}e[t].userId===(null===(l=e[t+1])||void 0===l?void 0:l.userId)||e[t].last||(e[t].unique=!0)}}r(e),x(h+1),setTimeout((function(){p&&o&&(p.scrollTop=p.scrollHeight)}),5)}),[n]);return Object(f.jsxs)("div",{id:"data",className:w.a.messagesWrapper,onScroll:function(e){var s=e.currentTarget;Math.abs(s.scrollHeight-s.scrollTop-s.clientHeight)<150?j(!0):j(!1)},children:[!o&&Object(f.jsx)(d.a,{type:"text",icon:Object(f.jsx)(N.a,{count:h,size:"small",children:Object(f.jsx)(I.DownCircleOutlined,{style:{fontSize:"25px"}})}),className:w.a.badge,size:"large",onClick:function(){p&&(p.scrollTop=p.scrollHeight,x(0))}}),t.map((function(e,s){return e.userMessage?Object(f.jsx)(y,{message:e.message,last:e.last,first:e.first,unique:e.unique}):Object(f.jsx)(v,{userName:e.userName,message:e.message,userId:e.userId,photo:e.photo,first:e.first,last:e.last,unique:e.unique},s)}))]})},C=t(2013),q=t.n(C),W=function(e){var s=Object(g.b)();return Object(a.useEffect)((function(){return s(Object(b.c)()),function(){s(Object(b.d)())}}),[]),Object(f.jsxs)("div",{className:q.a.chatWrapper,children:[Object(f.jsx)(A,{}),Object(f.jsx)(O,{})]})};s.default=function(e){return Object(f.jsx)("div",{className:n.a.dialogs,children:Object(f.jsx)(W,{})})}},450:function(e,s,t){e.exports={message:"Message_message__3CLID",lastMessageWrapper:"Message_lastMessageWrapper__24vfZ",avatar:"Message_avatar__mw1E4",messageContent:"Message_messageContent__zSm26",lastMessage:"Message_lastMessage__2nboT",svgAppendix:"Message_svgAppendix__2H4ze",name:"Message_name__frqHt",text:"Message_text__228oE",userLastMessageWrapper:"Message_userLastMessageWrapper__QydPZ",userMessage:"Message_userMessage__1BDzA",userMessageContent:"Message_userMessageContent__1yBBK",userLastMessage:"Message_userLastMessage__3Wgx_",userAppendix:"Message_userAppendix__e3w45",userText:"Message_userText__36twZ"}},451:function(e,s,t){e.exports={dialogs:"Dialogs_dialogs__2goUN"}},452:function(e,s,t){e.exports={addMessage:"AddMessageForm_addMessage__1pBo-",messageInput:"AddMessageForm_messageInput__1eIFv",sendBtn:"AddMessageForm_sendBtn__3Z0hk"}},455:function(e,s,t){e.exports={messagesWrapper:"Messages_messagesWrapper__3Ef1v",badge:"Messages_badge__3CZMy"}}}]);
//# sourceMappingURL=4.9de67db2.chunk.js.map