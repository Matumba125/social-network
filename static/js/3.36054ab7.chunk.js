(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[3],{449:function(e,s,t){e.exports={dialogs:"Dialogs_dialogs__2goUN",dialogs_items:"Dialogs_dialogs_items__1JDUH",messages:"Dialogs_messages__iGu3o",addMessage:"Dialogs_addMessage__165qa"}},450:function(e,s,t){e.exports={addMessage:"AddMessageForm_addMessage__1pBo-",messageInput:"AddMessageForm_messageInput__1eIFv",sendBtn:"AddMessageForm_sendBtn__3Z0hk"}},453:function(e,s,t){e.exports={message:"Message_message__3CLID",avatar:"Message_avatar__mw1E4",messageContent:"Message_messageContent__zSm26",svgAppendix:"Message_svgAppendix__2H4ze",name:"Message_name__frqHt",text:"Message_text__228oE",time:"Message_time__23Oc7"}},454:function(e,s,t){e.exports={messagesWrapper:"Messages_messagesWrapper__3Ef1v"}},455:function(e,s,t){e.exports={chatWrapper:"Chat_chatWrapper__2X21x"}},457:function(e,s,t){"use strict";t.r(s);var a=t(0),n=t(449),c=t.n(n),r=t(60),i=t(125),o=t(451),l=t.n(o),d=t(450),u=t.n(d),j=t(56),g=t(458),f=t(3),m=["wsChannel"],v=function(e){var s=e.wsChannel,t=(Object(i.a)(e,m),Object(a.useState)("")),n=Object(r.a)(t,2),c=n[0],o=n[1],d=Object(a.useState)(!1),v=Object(r.a)(d,2),h=v[0],O=v[1];Object(a.useEffect)((function(){var e=function(){O(!0)};return s&&s.addEventListener("open",e),function(){null===s||void 0===s||s.removeEventListener("open",e)}}),[s]);var b=function(){c&&(s&&s.send(c),o(""))};return Object(f.jsxs)("div",{className:u.a.addMessage,children:[Object(f.jsx)(l.a,{className:u.a.messageInput,autoSize:{minRows:1},value:c,onChange:function(e){o(e.target.value)},onKeyPress:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),b())}}),Object(f.jsx)(j.a,{icon:Object(f.jsx)(g.a,{style:{color:"rgba(0, 0, 0, 0.85)"}}),type:"text",className:u.a.sendBtn,onClick:b,disabled:!h})]})},h=t(107),O=t(453),b=t.n(O),_=t(242),p=t(432),x=function(e){return Object(f.jsxs)("div",{className:b.a.message,children:[Object(f.jsx)(_.a,{src:e.photo&&e.photo,icon:!e.photo&&Object(f.jsx)(p.a,{}),className:b.a.avatar,size:50}),Object(f.jsx)("div",{className:b.a.svgAppendix,children:Object(f.jsxs)("svg",{width:"9",height:"20",xmlns:"http://www.w3.org/2000/svg",children:[Object(f.jsx)("defs",{children:Object(f.jsxs)("filter",{x:"-50%",y:"-14.7%",width:"200%",height:"141.2%",filterUnits:"objectBoundingBox",id:"a",children:[Object(f.jsx)("feOffset",{dy:"1",in:"SourceAlpha",result:"shadowOffsetOuter1"}),Object(f.jsx)("feGaussianBlur",{stdDeviation:"1",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),Object(f.jsx)("feColorMatrix",{values:"0 0 0 0 0.0621962482 0 0 0 0 0.138574144 0 0 0 0 0.185037364 0 0 0 0.15 0",in:"shadowBlurOuter1"})]})}),Object(f.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(f.jsx)("path",{d:"M3 17h6V0c-.193 2.84-.876 5.767-2.05 8.782-.904 2.325-2.446 4.485-4.625 6.48A1 1 0 003 17z",fill:"rgb(24, 37, 51)",filter:"url(#a)"}),Object(f.jsx)("path",{d:"M3 17h6V0c-.193 2.84-.876 5.767-2.05 8.782-.904 2.325-2.446 4.485-4.625 6.48A1 1 0 003 17z",fill:"rgb(24, 37, 51)",className:"corner"})]})]})}),Object(f.jsxs)("div",{className:b.a.messageContent,children:[Object(f.jsx)("div",{className:b.a.name,children:e.userName}),Object(f.jsx)("div",{className:b.a.text,children:e.message})]})]})},w=t(454),M=t.n(w),N=["wsChannel"],E=function(e){var s=e.wsChannel,t=(Object(i.a)(e,N),Object(a.useState)([])),n=Object(r.a)(t,2),c=n[0],o=n[1];return Object(a.useEffect)((function(){var e=function(e){var s=JSON.parse(e.data);o((function(e){return[].concat(Object(h.a)(e),Object(h.a)(s))}))};return null===s||void 0===s||s.addEventListener("message",e),function(){null===s||void 0===s||s.removeEventListener("message",e)}}),[s]),Object(f.jsx)("div",{className:M.a.messagesWrapper,children:c.map((function(e,s){return Object(f.jsx)(x,{userName:e.userName,message:e.message,userId:e.userId,photo:e.photo},s)}))})},C=t(455),k=t.n(C),A=function(e){var s=Object(a.useState)(null),t=Object(r.a)(s,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){var e,s=function(){setTimeout(t,3e3)};function t(){var t,a;null===(t=e)||void 0===t||t.removeEventListener("close",s),null===(a=e)||void 0===a||a.close(),e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"),null===n||void 0===n||n.addEventListener("close",s),c(e)}return t(),function(){e.removeEventListener("close",s),e.close()}}),[]),Object(a.useEffect)((function(){null===n||void 0===n||n.addEventListener("close",(function(){}))}),[n]),Object(f.jsxs)("div",{className:k.a.chatWrapper,children:[Object(f.jsx)(E,{wsChannel:n}),Object(f.jsx)(v,{wsChannel:n})]})};s.default=function(e){return Object(f.jsx)("div",{className:c.a.dialogs,children:Object(f.jsx)(A,{})})}}}]);
//# sourceMappingURL=3.36054ab7.chunk.js.map