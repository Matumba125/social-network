(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[4],{2014:function(e,s,t){e.exports={chatWrapper:"Chat_chatWrapper__2X21x"}},2016:function(e,s,t){"use strict";t.r(s);var a=t(0),n=t(451),c=t.n(n),r=t(61),i=t(453),o=t.n(i),l=t(452),u=t.n(l),d=t(57),j=t(2018),g=t(21),b=t(183),f=t(3),_=function(){var e=Object(a.useState)(""),s=Object(r.a)(e,2),t=s[0],n=s[1],c=Object(g.c)((function(e){return e.chat.isReady})),i=Object(g.b)(),l=function(){t&&(i(Object(b.b)(t)),n(""))};return Object(f.jsxs)("div",{className:u.a.addMessage,children:[Object(f.jsx)(o.a,{className:u.a.messageInput,autoSize:{minRows:1},value:t,onChange:function(e){n(e.target.value)},onKeyPress:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),l())}}),Object(f.jsx)(d.a,{icon:Object(f.jsx)(j.a,{style:{color:"rgba(0, 0, 0, 0.85)"}}),type:"text",className:u.a.sendBtn,onClick:l,disabled:!c})]})},O=t(455),p=t.n(O),h=t(244),m=t(434),x=t(34),v=function(e){var s=e.last||e.unique?p.a.lastMessageWrapper:p.a.message,t=e.last||e.unique?p.a.lastMessage:p.a.messageContent;return Object(f.jsxs)("div",{className:s,children:[(e.last||e.unique)&&Object(f.jsxs)(x.c,{to:"/social-network/profile/"+e.userId,children:[Object(f.jsx)(h.a,{src:e.photo&&e.photo,icon:!e.photo&&Object(f.jsx)(m.a,{}),className:p.a.avatar,size:40}),Object(f.jsx)("div",{className:p.a.svgAppendix,children:Object(f.jsxs)("svg",{width:"9",height:"20",xmlns:"http://www.w3.org/2000/svg",children:[Object(f.jsx)("defs",{children:Object(f.jsxs)("filter",{x:"-50%",y:"-14.7%",width:"200%",height:"141.2%",filterUnits:"objectBoundingBox",id:"a",children:[Object(f.jsx)("feOffset",{dy:"1",in:"SourceAlpha",result:"shadowOffsetOuter1"}),Object(f.jsx)("feGaussianBlur",{stdDeviation:"1",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),Object(f.jsx)("feColorMatrix",{values:"0 0 0 0 0.0621962482 0 0 0 0 0.138574144 0 0 0 0 0.185037364 0 0 0 0.15 0",in:"shadowBlurOuter1"})]})}),Object(f.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[Object(f.jsx)("path",{d:"M3 17h6V0c-.193 2.84-.876 5.767-2.05 8.782-.904 2.325-2.446 4.485-4.625 6.48A1 1 0 003 17z",fill:"rgb(24, 37, 51)",filter:"url(#a)"}),Object(f.jsx)("path",{d:"M3 17h6V0c-.193 2.84-.876 5.767-2.05 8.782-.904 2.325-2.446 4.485-4.625 6.48A1 1 0 003 17z",fill:"rgb(24, 37, 51)",className:"corner"})]})]})})]}),Object(f.jsxs)("div",{className:t,children:[(e.first||e.unique)&&Object(f.jsx)(x.c,{to:"/social-network/profile/"+e.userId,children:Object(f.jsx)("div",{className:p.a.name,children:e.userName})}),Object(f.jsx)("div",{className:p.a.text,children:e.message})]})]})},M=t(456),w=t.n(M),I=t(2017),N=t(457),y=function(){var e=Object(a.useState)([]),s=Object(r.a)(e,2),t=s[0],n=s[1],c=Object(g.c)((function(e){return e.chat.messages})),i=Object(a.useState)(!0),o=Object(r.a)(i,2),l=o[0],u=o[1],j=Object(a.useState)(-2),b=Object(r.a)(j,2),_=b[0],O=b[1],p=document.getElementById("data");Object(a.useEffect)((function(){var e=c.slice();if(c)for(var s=0;s<e.length;s++){var t,a,r;if(e[s].userId===(null===(t=e[s+1])||void 0===t?void 0:t.userId)&&e[s].userId!==(null===(a=e[s-1])||void 0===a?void 0:a.userId)){e[s].first=!0,e[s].unique=!1;for(var i=s;e[i].userId===(null===(o=e[i+1])||void 0===o?void 0:o.userId)&&e[i+1].userId;){var o;i++}e[i-1].last=!1,e[i].last=!0,s=i}e[s].userId===(null===(r=e[s+1])||void 0===r?void 0:r.userId)||e[s].last||(e[s].unique=!0)}n(e),O(_+1),setTimeout((function(){p&&l&&(p.scrollTop=p.scrollHeight)}),5)}),[c]);return Object(f.jsxs)("div",{id:"data",className:w.a.messagesWrapper,onScroll:function(e){var s=e.currentTarget;Math.abs(s.scrollHeight-s.scrollTop-s.clientHeight)<150?u(!0):u(!1)},children:[!l&&Object(f.jsx)(d.a,{type:"text",icon:Object(f.jsx)(I.a,{count:_,size:"small",children:Object(f.jsx)(N.DownCircleOutlined,{})}),className:w.a.badge,size:"large",onClick:function(){p&&(p.scrollTop=p.scrollHeight)}}),t.map((function(e,s){return Object(f.jsx)(v,{userName:e.userName,message:e.message,userId:e.userId,photo:e.photo,first:e.first,last:e.last,unique:e.unique},s)}))]})},C=t(2014),k=t.n(C),q=function(e){var s=Object(g.b)();return Object(a.useEffect)((function(){return s(Object(b.c)()),function(){s(Object(b.d)())}}),[]),Object(f.jsxs)("div",{className:k.a.chatWrapper,children:[Object(f.jsx)(y,{}),Object(f.jsx)(_,{})]})};s.default=function(e){return Object(f.jsx)("div",{className:c.a.dialogs,children:Object(f.jsx)(q,{})})}},451:function(e,s,t){e.exports={dialogs:"Dialogs_dialogs__2goUN",dialogs_items:"Dialogs_dialogs_items__1JDUH",messages:"Dialogs_messages__iGu3o",addMessage:"Dialogs_addMessage__165qa"}},452:function(e,s,t){e.exports={addMessage:"AddMessageForm_addMessage__1pBo-",messageInput:"AddMessageForm_messageInput__1eIFv",sendBtn:"AddMessageForm_sendBtn__3Z0hk"}},455:function(e,s,t){e.exports={message:"Message_message__3CLID",lastMessageWrapper:"Message_lastMessageWrapper__24vfZ",avatar:"Message_avatar__mw1E4",messageContent:"Message_messageContent__zSm26",lastMessage:"Message_lastMessage__2nboT",svgAppendix:"Message_svgAppendix__2H4ze",name:"Message_name__frqHt",text:"Message_text__228oE",time:"Message_time__23Oc7"}},456:function(e,s,t){e.exports={messagesWrapper:"Messages_messagesWrapper__3Ef1v",badge:"Messages_badge__3CZMy"}}}]);
//# sourceMappingURL=4.0134dc57.chunk.js.map